{"version":3,"sources":["webpack:///./src/components/table-comb/index.vue?6071","webpack:///src/components/table-comb/index.vue","webpack:///./src/components/table-comb/index.vue?64cd","webpack:///./src/components/table-comb/index.vue?ed2b","webpack:///./src/components/table-comb/index.vue?f120"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_t","attrs","model","searchModelDataBase","label-width","size","staticStyle","width","placeholder","prefix-icon","clearable","value","callback","$$v","$set","expression","_e","form","isOpenAdvancedSearch","margin-left","type","on","click","search","_v","$event","openAdvancedSearch","_s","directives","name","rawName","searchModelData","reset","ref","data","tableData","border","select","checkedOne","select-all","checkedAll","sort-change","tableSortChange","checkedItems","length","tag","mode","_l","item","key","id","username","title","removeCheckedItem","href","removeAllCheckedItem","current-page","pagingInfo","currentPage","page-sizes","page-size","layout","total","totalRecord","size-change","handleSizeChange","current-change","fetchData","staticRenderFns","table_combvue_type_script_lang_js_","props","String","getAction","Function","getActionWhere","Object","removeAction","removeBatchAction","editPath","listPath","searchModel","searchModelBase","default","pagingConfig","autoFetch","Boolean","sortChange","loading","sortInfo","pageSize","computed","isShowBaseSearch","$scopedSlots","baseSearchForm","methods","_ref","column","prop","order","substr","selection","row","isExist","isChecked","some","push","i","splice","_this2","map","$refs","table","toggleRowSelection","j","initRecordChecked","edit","$router","path","$message","error","remove","_this","$msgbox","message","showCancelButton","confirmButtonText","cancelButtonText","then","action","res","code","success","$emit","catch","removeBatch","ids","warning","pageIndex","conditionObj","hasOwnProperty","undefined","_key","_value","sort","assign","$env","console","log","$nextTick","lodash","val","mounted","components_table_combvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_058b848c_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-26f2.1b497241.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"m-table-comb\"},[_c('section',{staticClass:\"table-filter\"},[_c('div',{staticClass:\"controls\"},[_vm._t(\"controls\")],2),_c('el-form',{attrs:{\"model\":_vm.searchModelDataBase,\"label-width\":\"120px\",\"size\":\"small\"}},[(_vm.isShowBaseSearch)?_c('el-input',{staticStyle:{\"width\":\"160px\"},attrs:{\"placeholder\":\"请输入关键字\",\"prefix-icon\":\"el-icon-search\",\"clearable\":\"\"},model:{value:(_vm.searchModelDataBase.name),callback:function ($$v) {_vm.$set(_vm.searchModelDataBase, \"name\", $$v)},expression:\"searchModelDataBase.name\"}}):_vm._e(),_vm._t(\"baseSearchForm\",null,{form:this.searchModelDataBase}),(!_vm.isOpenAdvancedSearch)?_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")]):_vm._e(),(_vm.searchModel)?_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},on:{\"click\":function($event){_vm.openAdvancedSearch()}}},[_vm._v(_vm._s(_vm.isOpenAdvancedSearch ? '关闭高级查询' : '高级查询'))]):_vm._e()],2)],1),_c('section',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isOpenAdvancedSearch),expression:\"isOpenAdvancedSearch\"}],staticClass:\"table-filter-advanced\"},[_c('el-form',{attrs:{\"model\":_vm.searchModelData,\"label-width\":\"120px\",\"size\":\"small\"}},[_vm._t(\"advancedSearchForm\",null,{form:this.searchModelData}),_c('div',{staticClass:\"form-controls\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")]),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.reset}},[_vm._v(\"重置\")]),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.isOpenAdvancedSearch = false}}},[_vm._v(\"取消\")])],1)],2)],1),_c('section',{staticClass:\"table-content\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"table\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\"},on:{\"select\":_vm.checkedOne,\"select-all\":_vm.checkedAll,\"sort-change\":_vm.tableSortChange}},[_vm._t(\"tableColumns\")],2)],1),_c('section',{directives:[{name:\"show\",rawName:\"v-show\",value:(this.checkedItems && this.checkedItems.length > 0),expression:\"this.checkedItems && this.checkedItems.length > 0\"}]},[_c('div',{staticClass:\"checked-items\"},[_c('transition-group',{attrs:{\"tag\":\"div\",\"name\":\"scale\",\"mode\":\"out-in\"}},_vm._l((this.checkedItems),function(item){return _c('span',{key:item.id},[_vm._v(_vm._s(item.username || item.name || item.title || item.id)+\" \"),_c('i',{on:{\"click\":function($event){_vm.removeCheckedItem(item)}}})])})),_c('a',{staticClass:\"clear-all\",attrs:{\"href\":\"javascript:void(0);\"},on:{\"click\":function($event){_vm.removeAllCheckedItem()}}},[_vm._v(\"清空\")])],1)]),_c('section',{staticClass:\"table-paging\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.pagingInfo.currentPage,\"page-sizes\":[10, 20, 50, 100],\"page-size\":10,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.pagingInfo.totalRecord},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.fetchData}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"m-table-comb\">\n    <!--数据过滤和按钮组-->\n    <section class=\"table-filter\">\n      <div class=\"controls\">\n        <slot name=\"controls\"></slot>\n      </div>\n      <el-form :model=\"searchModelDataBase\" label-width=\"120px\" size=\"small\">\n        <el-input\n          placeholder=\"请输入关键字\"\n          prefix-icon=\"el-icon-search\"\n          clearable\n          v-model=\"searchModelDataBase.name\"\n          v-if=\"isShowBaseSearch\"\n          style=\"width: 160px;\">\n        </el-input>\n        <slot name=\"baseSearchForm\" :form=\"this.searchModelDataBase\"></slot>\n        <el-button type=\"primary\" @click=\"search\" v-if=\"!isOpenAdvancedSearch\" style=\"margin-left: 10px;\">查询</el-button>\n        <el-button @click=\"openAdvancedSearch()\" v-if=\"searchModel\" style=\"margin-left: 10px;\">{{ isOpenAdvancedSearch ? '关闭高级查询' : '高级查询' }}</el-button>\n      </el-form>\n    </section>\n    <!--高级查询-->\n    <section class=\"table-filter-advanced\" v-show=\"isOpenAdvancedSearch\">\n      <el-form :model=\"searchModelData\" label-width=\"120px\" size=\"small\">\n        <slot name=\"advancedSearchForm\" :form=\"this.searchModelData\"></slot>\n        <div class=\"form-controls\">\n          <el-button type=\"primary\" size=\"mini\" @click=\"search\">查询</el-button>\n          <el-button size=\"small\" @click=\"reset\">重置</el-button>\n          <el-button size=\"small\" @click=\"isOpenAdvancedSearch = false\">取消</el-button>\n        </div>\n      </el-form>\n    </section>\n    <!--数据表格-->\n    <section class=\"table-content\">\n      <el-table\n        ref=\"table\"\n        :data=\"tableData\"\n        v-loading=\"loading\"\n        border\n        @select=\"checkedOne\"\n        @select-all=\"checkedAll\"\n        @sort-change=\"tableSortChange\"\n        style=\"width: 100%\">\n        <slot name=\"tableColumns\"></slot>\n      </el-table>\n    </section>\n    <!--多选数据视图-->\n    <section v-show=\"this.checkedItems && this.checkedItems.length > 0\">\n      <div class=\"checked-items\">\n        <transition-group tag=\"div\" name=\"scale\" mode=\"out-in\">\n          <span v-for=\"item in this.checkedItems\" :key=\"item.id\">{{ item.username || item.name || item.title || item.id }} <i @click=\"removeCheckedItem(item)\"></i></span>\n        </transition-group>\n        <a href=\"javascript:void(0);\" class=\"clear-all\" @click=\"removeAllCheckedItem()\">清空</a>\n      </div>\n    </section>\n    <!--分页-->\n    <section class=\"table-paging\">\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"fetchData\"\n        :current-page=\"pagingInfo.currentPage\"\n        :page-sizes=\"[10, 20, 50, 100]\"\n        :page-size=\"10\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"pagingInfo.totalRecord\">\n      </el-pagination>\n    </section>\n\n  </section>\n</template>\n\n<script>\nimport { clone } from 'lodash'\n\nexport default {\n  name: 'DataTableComb',\n  props: {\n    name: String,\n    getAction: Function,\n    getActionWhere: Object,\n    removeAction: Function,\n    removeBatchAction: Function,\n    editPath: String,\n    listPath: String,\n    searchModel: Object,\n    searchModelBase: {\n      type: Object,\n      default: () => {\n        return {\n          name: ''\n        }\n      }\n    },\n    pagingConfig: Object,\n    autoFetch: { // 是否自动加载数据\n      type: Boolean,\n      default: true\n    },\n    sortChange: Function\n  },\n  data () {\n    return {\n      loading: true, // 数据是否在加载中\n      tableData: [], // 表格的数据\n      checkedItems: [], // 选中的数据\n      isOpenAdvancedSearch: false, // 是否打开高级搜索\n      sortInfo: null,\n      pagingInfo: { // 分页信息\n        pageSize: 10,\n        currentPage: 1,\n        totalRecord: 0\n      },\n      searchModelDataBase: {},\n      searchModelData: {}\n    }\n  },\n  computed: {\n    isShowBaseSearch () {\n      return !this.$scopedSlots.baseSearchForm\n    }\n  },\n  methods: {\n    tableSortChange ({ column, prop, order }) {\n      if (this.sortChange) {\n        this.sortChange({ column, prop, order })\n      } else if (column) {\n        this.sortInfo = prop + '_' + order.substr(0, 3) // ascending descending\n      } else {\n        this.sortInfo = null\n      }\n      this.fetchData()\n    },\n    /**\n       * 单个选中\n       */\n    checkedOne (selection, row) {\n      let isExist\n      let isChecked = selection.some(item => {\n        return item.id === row.id\n      }) // findIndex(selection, row) >= 0;\n      // 判断是否选中\n      if (!isChecked) {\n        for (let i = 0; i < this.checkedItems.length; i++) {\n          if (this.checkedItems[i].id === row.id) {\n            this.checkedItems.splice(i, 1)\n            break\n          }\n        }\n      } else {\n        // 判断是否存在\n        isExist = this.checkedItems.some(item => {\n          return item.id === row.id\n        }) // findIndex(this.checkedItems, row) >= 0;\n        if (!isExist) {\n          this.checkedItems.push(row)\n        }\n      }\n    },\n    /**\n       * 全选\n       */\n    checkedAll (selection) {\n      if (selection.length > 0) {\n        selection.map(item => {\n          this.checkedOne(selection, item) // 逐个选中\n        })\n      } else {\n        this.tableData.map(item => {\n          this.checkedOne([], item) // 逐个取消\n        })\n      }\n    },\n    /**\n       * 删除选中项\n       */\n    removeCheckedItem (item) {\n      for (let i = 0; i < this.checkedItems.length; i++) {\n        if (this.checkedItems[i].id === item.id) {\n          this.$refs.table.toggleRowSelection(item, false)\n          for (let j = 0; j < this.tableData.length; j++) {\n            if (this.tableData[j].id === item.id) {\n              this.$refs.table.toggleRowSelection(this.tableData[j], false)\n              break\n            }\n          }\n          this.checkedItems.splice(i, 1)\n          break\n        }\n      }\n    },\n    /**\n       * 删除所有选中项\n       */\n    removeAllCheckedItem () {\n      for (let i = 0; i < this.checkedItems.length; i++) {\n        this.$refs.table.toggleRowSelection(this.checkedItems[i], false)\n        for (let j = 0; j < this.tableData.length; j++) {\n          if (this.tableData[j].id === this.checkedItems[i].id) {\n            this.$refs.table.toggleRowSelection(this.tableData[j], false)\n            break\n          }\n        }\n        this.checkedItems.splice(i, 1)\n        i--\n      }\n    },\n    /**\n       * 初始化选中项\n       */\n    initRecordChecked () {\n      // 很奇怪，checkedItems 和 tableData 的值一样，但是就是用不了checkedItems 的数据\n      for (let i = 0; i < this.checkedItems.length; i++) {\n        for (let j = 0; j < this.tableData.length; j++) {\n          if (this.checkedItems[i].id === this.tableData[j].id) {\n            this.$refs.table.toggleRowSelection(this.tableData[j], true)\n            break\n          }\n        }\n      }\n    },\n    /**\n       * 打开高级搜索\n       */\n    openAdvancedSearch () {\n      this.isOpenAdvancedSearch = !this.isOpenAdvancedSearch\n    },\n    /**\n       * 编辑\n       */\n    edit (id) {\n      if (!this.editPath) {\n        this.$message.error('编辑失败，因为对应的Action没有设置')\n        return\n      }\n      this.$router.push({ path: this.editPath + '/' + id })\n    },\n    /**\n       * 删除\n       */\n    remove (id) {\n      let _this = this\n\n      if (!_this.removeAction) {\n        _this.$message.error('删除失败，因为对应的Action没有设置')\n        return\n      }\n\n      this.$msgbox({\n        title: '提示',\n        message: `确定要删除该数据？`,\n        showCancelButton: true,\n        confirmButtonText: '确定',\n        cancelButtonText: '取消'\n      }).then(action => {\n        if (action === 'confirm') {\n          _this.loading = true\n          _this.removeAction(id).then(res => {\n            if (res.code === 0) {\n              for (let i = 0; i < _this.tableData.length; i++) {\n                if (_this.tableData[i].id === id) {\n                  _this.tableData.splice(i, 1)\n                  i++\n                }\n              }\n              if(_this.tableData.length>0){\n                _this.fetchData();\n              }else{\n                _this.fetchData(_this.pagingInfo.currentPage-1 || 1);\n              }\n              _this.$message.success(`删除数据成功`)\n              _this.$emit('on-remove-success')\n            } else {\n              _this.$message.error(res.message)\n            }\n\n            _this.loading = false\n          }).catch(() => {\n            _this.$message.error(`删除数据失败`)\n          })\n        }\n      }).catch(() => {\n      })\n    },\n    /**\n       * 批量删除\n       */\n    removeBatch () {\n      let _this = this\n      let ids = this.checkedItems.map(item => {\n        return item.id\n      })\n\n      if (!this.removeBatchAction) {\n        this.$message.error('删除失败，因为对应的Action没有设置')\n        return\n      }\n\n      if (ids.length === 0) {\n        _this.$message.warning('请选择数据')\n        return\n      }\n\n      this.$msgbox({\n        title: '提示',\n        message: `确定要删除选中的数据？`,\n        showCancelButton: true,\n        confirmButtonText: '确定',\n        cancelButtonText: '取消'\n      }).then(action => {\n        if (action === 'confirm') {\n          _this.loading = true\n          _this.removeBatchAction(ids).then(() => {\n            // 删除当前表格里面的数据\n            for (let i = 0; i < _this.tableData.length; i++) {\n              for (let j = 0; j < ids.length; j++) {\n                if (_this.tableData[i].id === ids[j]) {\n                  _this.tableData.splice(i, 1)\n                  i--\n                  break\n                }\n              }\n            }\n            // 删除选中的数据\n            _this.checkedItems = []\n\n            _this.loading = false\n            _this.$message.success(`删除数据成功`)\n            _this.$emit('on-remove-success')\n          }).catch(() => {\n            _this.$message.error(`删除数据失败`)\n          })\n        }\n      }).catch(() => {\n      })\n    },\n    /**\n       * 获取数据\n       * @param pageIndex\n       */\n    fetchData (pageIndex) {\n      let _this = this\n      let conditionObj = {}\n\n      if (!this.getAction) {\n        this.$message.error('获取数据失败，因为对应的Action没有设置')\n        return\n      }\n\n      _this.pagingInfo.currentPage = pageIndex || _this.pagingInfo.currentPage || 1\n      _this.loading = true\n\n      // 基础搜索\n      for (let key in this.searchModelDataBase) {\n        if (this.searchModelDataBase.hasOwnProperty(key)) {\n          let value = this.searchModelDataBase[key]\n          if (value !== undefined && value !== '' && value.length !== 0) {\n            conditionObj[key] = this.searchModelDataBase[key]\n          }\n        }\n      }\n      // 高级搜索\n      if (this.isOpenAdvancedSearch) {\n        for (let key in this.searchModelData) {\n          if (this.searchModelData.hasOwnProperty(key)) {\n            let value = this.searchModelData[key]\n            if (value !== undefined && value !== '' && value.length !== 0) {\n              conditionObj[key] = this.searchModelData[key]\n            }\n          }\n        }\n      }\n      // 添加排序条件\n      if (_this.sortInfo) {\n        conditionObj.sort = _this.sortInfo\n      }\n      // 添加自定义条件\n      Object.assign(conditionObj, this.getActionWhere)\n\n      // 请求数据\n      this.getAction(conditionObj, _this.pagingInfo).then(res => {\n        _this.$env === 'development' && console.log('[DEBUG] tableData:')\n        _this.$env === 'development' && console.log(res)\n        _this.tableData = res.data.data\n        _this.pagingInfo.totalRecord = res.data.totalRecord || res.data.data.length\n        // 设置已选择项目\n        _this.$nextTick(() => {\n          _this.initRecordChecked()\n        })\n\n        _this.loading = false\n      }).catch(error => {\n        console.error(error)\n        _this.$message.error(`获取数据列表失败`)\n        _this.loading = false\n      })\n    },\n    /**\n       * 重置查询条件\n       */\n    reset () {\n      // this.searchModelDataBase = clone(this.searchModelBase)\n      this.searchModelData = clone(this.searchModel)\n    },\n    /**\n       * 分页改变事件\n       */\n    handleSizeChange (val) {\n      this.pagingInfo.pageSize = val\n      this.fetchData()\n    },\n    /**\n       * 查找, 点击事件\n       */\n    search () {\n      this.fetchData()\n    }\n  },\n  mounted () {\n    let _this = this\n    if (this.autoFetch) {\n      _this.fetchData()\n    } else {\n      _this.loading = false\n    }\n    this.searchModelData = clone(this.searchModel)\n    this.searchModelDataBase = clone(this.searchModelBase)\n    Object.assign(this.pagingInfo, this.pagingConfig)\n  }\n}\n</script>\n\n<style type=\"text/scss\" scoped>\n  /* --------------------------------------------------------------------------\n     组合表格补充样式\n     -------------------------------------------------------------------------- */\n  /* 过滤 */\n  .m-table-comb .table-filter { padding-bottom: 20px; }\n  .m-table-comb .table-filter .controls { float: right; }\n  .m-table-comb .table-filter .controls > a,\n  .m-table-comb .table-filter .controls > button { margin-left: 5px; }\n  .m-table-comb .table-paging { padding: 30px; text-align: center; }\n  /* 高级搜索 */\n  .m-table-comb .table-filter-advanced { margin-bottom: 20px; padding: 16px 10px; border: 1px solid #cdd7ef; border-radius: 5px; background-color: #edf7ff; }\n  .m-table-comb .table-filter-advanced .form-controls { text-align: right; }\n  /* 选中项目 */\n  .m-table-comb .checked-items { position: relative; margin-top: 10px; padding: 8px 50px 0 8px; border: 1px solid #cdd7ef; border-radius: 5px; background-color: #edf7ff; }\n  .m-table-comb .checked-items span { position: relative; display: inline-block; margin: 0 8px 8px 0; padding: 0 28px 0 6px; height: 22px; border-radius: 3px; background-color: #4db3ff; color: #fff; font-size: 13px; line-height: 22px; }\n  .m-table-comb .checked-items span i { position: absolute; top: 0; right: 0; display: inline-block; width: 22px; height: 22px; border-left: solid 1px #3da3df; border-radius: 0 3px 3px 0; background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAgMAAABinRfyAAAADFBMVEUAAAD///////////84wDuoAAAAA3RSTlMAoDByqEibAAAAKUlEQVQI12NABw1MDAxMF9gbGBhKZIFc2RIgwX4BTEC4IAmIErBiNAAAMaMHqaYF4lAAAAAASUVORK5CYII=) 50% 50%; text-align: center; font-style: normal; cursor: pointer; -webkit-transition: all .3s; transition: all .3s; }\n  .m-table-comb .checked-items span i:hover { background-color: #3da3ef; }\n  .m-table-comb .checked-items .clear-all { position: absolute; top: 8px; right: 10px; color: #20a0ff; text-decoration: none; font-size: 14px; line-height: 22px; }\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=058b848c&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=058b848c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"058b848c\",\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=058b848c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=058b848c&scoped=true&lang=css&\""],"sourceRoot":""}